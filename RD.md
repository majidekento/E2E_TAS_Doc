# 1. **プロジェクト概要**

## **プロジェクト名**

エンドツーエンドテストオートメーションシステム (E2E TAS)

## **プロジェクトの目的 (Project Purpose)**

このプロジェクトは、ソフトウェア開発プロセス内での品質保証とエフィシエンシー向上を目指しています。エンドツーエンドのテストフレームワークを自動化することにより、手動テストの作業負荷を減らし、バグの早期発見と修正を可能にします。これにより、リリース前のソフトウェアの安定性と信頼性が確保されることを目的としています。

## **プロジェクトの目標 (Project Goals)**

1. **統合性**:
    - 既存の開発ツールやCI/CDパイプラインとのシームレスな統合を実現。
    - 異なる環境やプラットフォーム間での互換性を保持。
2. **バージョン管理**:
    - テストスクリプトと関連ドキュメントのバージョン管理を容易に行えるようにする。
    - チームメンバー間のコラボレーションを強化し、変更履歴の追跡と復元を可能にする。
3. **ユーザーフレンドリー**:
    - インターフェースが直感的で、非技術的なスタッフでも容易にテストを作成、実行、解析ができるようにする。
    - 豊富なドキュメントとエラーメッセージでユーザーサポートを提供。
4. **セキュリティ**:
    - テストデータの管理と保存において最高レベルのセキュリティを確保。
    - ソフトウェアとデータの整合性を保つための安全なアクセス制御。
5. **拡張性**:
    - 将来的な技術の進展や新しいテスト要件に柔軟に対応できるアーキテクチャ。
    - プラグインやAPIを通じての機能追加やカスタマイズを容易にする。

---

# 2. 開発工程

### **スプリント1: 初期開発ステージ**

1. **要件定義書生成**
2. **シーケンス図生成**
3. **システムコンテキスト図生成**
4. **デプロイメント図生成**

### **スプリント2-N: 開発ステージ**

1. **コンポーネント図生成**
2. **ディレクトリ設計生成**
3. **Class設計生成（バックエンド）**
4. **コード実装**
5. **テスト**
6. **ユーザーフィードバックの収集**
7. **スプリントレビュー**: スプリントの成果物をチーム全体でレビュー。
8. **リトロスペクティブ**: スプリントの振り返りを行い、次のスプリントの改善点を議論。

---

# 3. 画面一覧

| 機能カテゴリ | 機能詳細 | 対応画面 |
| --- | --- | --- |
| テストケース管理 | テストケースの作成、編集、管理 | テストケース管理画面 |
|  | テストケースの分類、タグ付け | テストケース管理画面 |
|  | テストスイートの定義と管理 | テストスイート管理画面 |
| テスト自動実行 | スケジュールに基づく自動実行 | テスト実行スケジュール画面 |
|  | CI/CDパイプラインとの統合 | 統合設定画面 |
|  | マルチブラウザ、マルチデバイスサポート | テスト環境設定画面 |
| レポーティングと分析 | テスト実行レポート | テスト結果レポート画面 |
|  | エラーログとスクリーンショットによる失敗分析 | テスト結果詳細画面 |
|  | テストカバレッジと進捗追跡 | プロジェクトダッシュボード |
| ビジュアルテスト | ビジュアルレグレッションテスト | ビジュアルテスト設定画面 |
|  | HTML要素の確認 | テスト実行画面 |
|  | 選択要素のスクリーンショット | テスト実行画面 |
| データ駆動テスト | データインポートと利用 | データ管理画面 |
|  | パラメータ化テストケース | テストケース管理画面 |
|  | ファイルアップロード機能 | データアップロード画面 |
| クロスプラットフォーム対応 | 異なるOSとデバイスでのテスト実行 | テスト環境設定画面 |
|  | モバイルデバイスサポート | テスト環境設定画面 |
| セキュリティとアクセス制御 | データとスクリプトのセキュリティ | セキュリティ設定画面 |
| カスタマイズと拡張 | カスタムプラグインやAPIの追加 | 拡張機能管理画面 |
|  | ワークフローのカスタマイズ | 設定画面 |
| リアルタイムコラボレーション | コミュニケーションと協力 | コラボレーション画面 |
|  | テストプロセスと結果の共有 | プロジェクトダッシュボード |
| デバッグとトラブルシューティング | ステップバイステップデバッグ | テスト実行画面 |
|  | ログとレポートによる問題特定 | テスト結果詳細画面 |

---

# 4. **システムアーキテクチャ**

## **システム概観**

本プロジェクトでは、ドメイン駆動設計 (DDD) の原則に従い、システムアーキテクチャを構築します。これにより、ビジネスロジックの明確なモデリングと、技術的な懸念の分離を図ります。

## ****アーキテクチャ設計****

バックエンドのアーキテクチャ設計はhttps://github.com/iktakahiro/dddpyのリポジトリの構造を利用します。

- ドメイン層: Pythonを使用し、ドメインロジックを表現します。参考として、
- アプリケーション層: ドメインロジックを操作し、ユーザインタフェースや外部システムとのインタラクションを処理します。
- インフラストラクチャ層: データベースアクセスや外部システムとの通信を管理します。
- プレゼンテーション層: UI/UXを提供し、ユーザからの入力を受け取り、ユーザへの出力を生成します。

---

# 5. **プロジェクト技術スタックドキュメント**

Webベースのインターフェースを通じてテストの作成、管理、実行を行い、結果を報告することを目的としています。

## **技術スタック**

### **1. フロントエンド**

- **Vue.js**: ユーザーインターフェースの構築にVue.jsフレームワークを使用します。このプログレッシブフレームワークは、リアクティブなデータバインディングとコンポーザブルなコンポーネントシステムを提供し、インタラクティブで直感的なUIの作成を容易にします。
- **Bootstrap 5**: フロントエンドのレイアウトとスタイリングにはBootstrap 5を採用します。レスポンシブデザインのガイドラインと広範なコンポーネントライブラリにより、一貫性のある外観と使いやすいインターフェースが実現されます。

### **2. バックエンド**

- **Flask**: 軽量で拡張可能なWebアプリケーションフレームワークであるFlaskをバックエンドに採用します。FlaskはRESTfulリクエストの処理、ルーティング、セッション管理などの基本的なウェブアプリケーション機能をサポートし、迅速な開発と簡単なデプロイメントを可能にします。

### **3. データベース**

- **SQLite**: 軽量でセットアップが容易なSQLiteをデータベースとして利用します。設定の複雑さやサーバーの要件を避けつつ、アプリケーションのデータストレージのニーズに対応します。

### **4. コンテナ化・ローカル開発**

- **Docker**: アプリケーションとその依存関係をコンテナとして構築し、ローカル開発環境の一貫性と再現性を保証します。Dockerを使用することで、異なる開発環境においても同様の動作を確実に再現できるようになります。

### **必要なライブラリ**

### フロントエンド

- **`vue`**: Vue.jsフレームワークのコアライブラリ。
- **`vue-router`**: Vue.js用のルーティングライブラリ。
- **`bootstrap`**: Bootstrap CSSフレームワーク。
- **`bootstrap-vue`**: Vue.js用のBootstrapコンポーネントとグリッドシステム。

### バックエンド

- **`Flask`**: Flaskウェブフレームワーク。
- **`Flask-RESTful`**: Flask用のRESTful API開発を支援する拡張。
- **`Flask-SQLAlchemy`**: SQLAlchemyをFlaskと統合するための拡張。
- **`Flask-Migrate`**: FlaskでのAlembicを使用したデータベースマイグレーションのためのツール。

### データベースとORM

- **`SQLAlchemy`**: PythonのSQLツールキットとオブジェクトリレーショナルマッピング(ORM)ライブラリ。
- **`sqlite3`**: SQLiteデータベースへのインターフェースを提供するライブラリ。

### テスト

- **`pytest`**: Pythonのテストフレームワーク。
- **`pytest-flask`**: Flaskアプリケーション用のPytestプラグイン。
- **`selenium`**: ブラウザの自動化を可能にするツール。

### 開発ツール

- **`flake8`**: Pythonコードのスタイルガイド遵守をチェック。
- **`black`**: Pythonの自動コードフォーマッター。

### コンテナ化

- **`Docker`**: アプリケーションとその依存関係をコンテナ化。

### その他ユーティリティ

- **`python-dotenv`**: **`.env`** ファイルから環境変数をロード。

### **開発ツールとプラクティス**

- **バージョン管理**: Gitを用いてソースコードのバージョン管理を行います。
- **コードレビュー**: Merge Request/Pull Requestを通じたコードレビューを行い、コードの品質を保証します。
- **CI/CD**: Continuous IntegrationとContinuous Deploymentを実装し、開発プロセスを効率化します。

### **セキュリティ**

- **データ保護**: データベースおよびAPIエンドポイントにおいて、適切な認証と承認を確立し、データの安全を保ちます。
- **セキュアコーディング**: OWASP Top 10のガイドラインに基づき、セキュリティリスクを軽減します。

---

# 6. **機能一覧**

## **1. テストケース管理**

- テストケースの作成、編集、および管理。
- テストケースの分類やタグ付けによる効率的な整理。
- テストスイートの定義と管理。

## **2. テスト自動実行**

- スケジュールに基づいたテストの自動実行。
- CI/CDパイプラインとの統合。
- マルチブラウザ、マルチデバイスでのテスト実行サポート。

## **3. レポーティングと分析**

- 詳細なテスト実行レポート。
- エラーログとスクリーンショットによる失敗の分析。
- テストカバレッジと進捗の追跡。

## **4. ビジュアルテスト**

- UIの変更を検知するためのビジュアルレグレッションテスト。
- スクリーンショット比較機能。
- **HTML要素の確認**: テスト中に特定のHTML要素の存在を確認。
- **選択要素のスクリーンショット**: テスト中にオプションで指定したHTML要素のスクリーンショットを取得。

## **5. データ駆動テスト**

- 外部データソースからのテストデータのインポートと利用。
- パラメータ化テストケースのサポート。
- ファイルアップロード機能: ブラウザからのフォームを使って、テスト用のURLリストなどのデータを含むファイルをアップロードし、テストデータとして使用。

## **6. クロスプラットフォーム対応**

- 異なるオペレーティングシステムとデバイスでのテスト実行。
- モバイルデバイス（iOS/Android）でのテストサポート。

## **7. セキュリティとアクセス制御**

- テストデータとテストスクリプトのセキュリティ確保。
- ユーザーロールに基づくアクセス権限の管理。

## **8. カスタマイズと拡張**

- カスタムプラグインやAPIを通じた拡張機能の追加。
- ユーザー固有のワークフローのカスタマイズサポート。

## **9. リアルタイムコラボレーション**

- チームメンバー間のリアルタイムでのコミュニケーションと協力。
- テストプロセスと結果の共有。

## **10. デバッグとトラブルシューティング**

- テスト実行中のステップバイステップデバッグ。
- 問題の原因を特定しやすい詳細なログとレポート。

---

# 7. **バウンデッドコンテキスト定義**

## **バウンデッドコンテキスト(Bounded Context)**

| bounded_context_id | bounded_context_name | bounded_context_name_jp | user_story |
| --- | --- | --- | --- |
| 1 | TestCaseManagement | テストケース管理 | テストケースの作成、編集、管理、分類、タグ付けを行う |
| 2 | TestExecution | テスト実行 | スケジュールに基づいたテストの自動実行、マルチブラウザ・マルチデバイスサポート |
| 3 | ReportingAndAnalysis | レポーティングと分析 | テスト実行レポートの生成、エラーログとスクリーンショットによる失敗分析 |
| 4 | VisualTesting | ビジュアルテスト | UIの変更を検知するビジュアルレグレッションテスト、スクリーンショット比較 |
| 5 | DataDrivenTesting | データ駆動テスト | 外部データソースからのテストデータのインポートと利用、パラメータ化テストケースのサポート |
| 6 | CrossPlatformSupport | クロスプラットフォーム対応 | 異なるOSとデバイスでのテスト実行、モバイルデバイスサポート |
| 7 | SecurityAndAccessControl | セキュリティとアクセス制御 | テストデータとテストスクリプトのセキュリティ確保、アクセス権限の管理 |
| 8 | CustomizationAndExtension | カスタマイズと拡張 | カスタムプラグインやAPIを通じた拡張機能の追加、ワークフローのカスタマイズ |
| 9 | RealTimeCollaboration | リアルタイムコラボレーション | チームメンバー間のコミュニケーションと協力、テストプロセスと結果の共有 |
| 10 | DebuggingAndTroubleshooting | デバッグとトラブルシューティング | ステップバイステップデバッグ、問題特定のためのログとレポート |

## **ビジネスケイパビリティ(Business Capability) - 詳細化**

### **1. テストケース管理 (TestCaseManagement)**

| business_capability_id | bounded_context_name | business_capability_name | use_case | business_rules |
| --- | --- | --- | --- | --- |
| 1.1 | TestCaseManagement | テストケースの作成 | 新しいテストケースの定義と入力 | テストケースは一意のIDと明確な説明を持つべき |
| 1.2 | TestCaseManagement | テストケースの編集 | 既存のテストケースの更新 | テストケースの変更は変更履歴として記録される |
| 1.3 | TestCaseManagement | テストケースの削除 | 不要になったテストケースの削除 | 削除前に確認プロンプトが表示される |
| 1.4 | TestCaseManagement | テストケースの分類とタグ付け | テストケースの効率的な検索と整理 | タグは事前に定義されたリストから選択または新規作成 |

### **2. テスト実行 (TestExecution)**

| business_capability_id | bounded_context_name | business_capability_name | use_case | business_rules |
| --- | --- | --- | --- | --- |
| 2.1 | TestExecution | スケジュールに基づく自動実行 | テストの自動実行のスケジューリング | テストは指定された時間に自動的に開始される |
| 2.2 | TestExecution | マルチブラウザサポート | 異なるブラウザでのテスト実行 | 各ブラウザでの互換性が保証される |
| 2.3 | TestExecution | マルチデバイスサポート | 異なるデバイスでのテスト実行 | テストは各デバイスの解像度と機能に適応する |

### **3. レポーティングと分析 (ReportingAndAnalysis)**

| business_capability_id | bounded_context_name | business_capability_name | use_case | business_rules |
| --- | --- | --- | --- | --- |
| 3.1 | ReportingAndAnalysis | テスト実行レポートの生成 | テスト結果の詳細なレポート作成 | レポートには実行結果、所要時間、失敗したテストケースが含まれる |
| 3.2 | ReportingAndAnalysis | エラーログとスクリーンショットによる分析 | テスト失敗の原因分析 | すべての失敗にはエラーログとスクリーンショットが添付される |
| 3.3 | ReportingAndAnalysis | テストカバレッジの追跡 | テストカバレッジの計測と報告 | カバレッジは定期的にレビューされ、目標値に達していることが確認される |

# **8. ドメインモデル設計**

| domain_id | bounded_context_name | business_capability_name | エンティティ | バリューオブジェクト | アグリゲート | ビジネスルール |
| --- | --- | --- | --- | --- | --- | --- |
| 1.1 | TestCaseManagement | テストケース管理 | テストケース | テストステップ | テストスイート | テストケースは一意のIDを持つ |
| 1.2 | TestCaseManagement | テストケース管理 | タグ | タグ名 | タグ集合 | タグはテストケースの検索と分類を容易にする |
| 2.1 | TestExecution | テスト実行 | テストラン | 実行環境 | テストジョブ | テストランは特定のテストスイートに対して行われる |
| 2.2 | TestExecution | テスト実行 | ブラウザ | ブラウザ設定 | テスト環境 | 各ブラウザは独自の設定を持つ |
| 3.1 | ReportingAndAnalysis | レポーティングと分析 | テストレポート | テスト結果 | テスト分析 | レポートには全テストケースの結果が含まれる |
| 3.2 | ReportingAndAnalysis | レポーティングと分析 | エラーログ | スクリーンショット | エラー分析 | エラーログは失敗の原因を特定するのに使用される |
| 4.1 | VisualTesting | ビジュアルテスト | スクリーンショット | 画像比較結果 | ビジュアルテストケース | スクリーンショットはUIの変更を検知するために使用される |
| 5.1 | DataDrivenTesting | データ駆動テスト | テストデータ | データセット | データ駆動テストケース | テストデータは外部ソースからインポートされる |
| 5.2 | DataDrivenTesting | データ駆動テスト | パラメータ | パラメータ値 | パラメータ化テスト | パラメータはテストの柔軟性を高める |
| 6.1 | CrossPlatformSupport | クロスプラットフォーム対応 | デバイス | OS設定 | テスト環境 | 各デバイスは異なるOS設定を持つ |
| 6.2 | CrossPlatformSupport | クロスプラットフォーム対応 | モバイルデバイス | デバイス仕様 | モバイルテスト | モバイルデバイスは特定のテストケースに対して使用される |
| 7.1 | SecurityAndAccessControl | セキュリティとアクセス制御 | ユーザー | ロール | アクセス制御 | ユーザーは特定のロールに基づいてアクセス権を持つ |
| 7.2 | SecurityAndAccessControl | セキュリティとアクセス制御 | アクセスポリシー | 権限レベル | セキュリティ設定 | アクセスポリシーはデータ保護を確保する |
| 8.1 | CustomizationAndExtension | カスタマイズと拡張 | プラグイン | API | 拡張機能 | プラグインは特定の機能を追加する |
| 8.2 | CustomizationAndExtension | カスタマイズと拡張 | ワークフロー | カスタマイズオプション | システム設定 | ワークフローはユーザーのニーズに合わせてカスタマイズされる |
| 9.1 | RealTimeCollaboration | リアルタイムコラボレーション | コミュニケーションツール | メッセージ | コラボレーション | コミュニケーションツールはチーム間の協力を促進する |
| 9.2 | RealTimeCollaboration | リアルタイムコラボレーション | 共有ドキュメント | コメント | ドキュメント管理 | 共有ドキュメントは情報の共有を容易にする |
| 10.1 | DebuggingAndTroubleshooting | デバッグとトラブルシューティング | デバッグツール | ログ | デバッグセッション | デバッグツールは問題解決に役立つ |

---

# **9. 非機能要件**

非機能要件は、システムがどのように動作すべきかを定義し、システムの品質属性を保証するための重要な要素です。以下に、エンドツーエンドテストオートメーションシステム（E2E TAS）の非機能要件を示します。

## **1. パフォーマンス**

- **応答時間**: システムの応答時間は、一般的な操作において2秒以内にする。
- **処理能力**: システムは、同時に1000件のテストケースを処理できること。

## **2. 可用性**

- **稼働率**: システムの稼働率は99.9%以上を目指す。
- **メンテナンス**: 定期的なメンテナンスのためのダウンタイムは、月に4時間以内に抑える。

## **3. スケーラビリティ**

- **拡張性**: システムは、ユーザー数やデータ量の増加に対して、リソースの追加や調整により対応可能であること。
- **負荷分散**: ピーク時の負荷を分散させるためのロードバランシング機能を備える。

## **4. セキュリティ**

- **データ保護**: テストデータは暗号化して保存し、不正アクセスや漏洩から保護する。
- **アクセス制御**: ユーザー認証と権限に基づくアクセス制御を実施する。
- **セキュリティ監査**: 定期的なセキュリティ監査を行い、脆弱性を早期に発見・修正する。

## **5. 互換性**

- **ブラウザ互換性**: 主要なブラウザ（Chrome、Firefox、Safari、Edge）の最新版に対応する。
- **デバイス互換性**: デスクトップ、タブレット、モバイルデバイスでの利用をサポートする。

## **6. バックアップと復旧**

- **データバックアップ**: 重要なデータは定期的にバックアップを取り、別の地理的位置に保存する。
- **災害復旧**: 緊急時には、バックアップからシステムを迅速に復旧できるプロセスを確立する。

## **7. ユーザビリティ**

- **インターフェース**: 直感的でわかりやすいユーザーインターフェースを提供する。
- **ドキュメンテーション**: 明確で理解しやすいユーザードキュメンテーションを提供する。

## **8. 国際化とローカリゼーション**

- **多言語対応**: 英語を基本とし、追加の言語サポートの可能性を検討する。
- **タイムゾーン**: ユーザーのタイムゾーンに基づく日時表示をサポートする。

## **9. 法規準拠**

- **データ保護法**: GDPRやその他の地域のデータ保護法規に準拠する。
- **ライセンス**: ソフトウェアと使用するライブラリは、適切なライセンスで使用する。